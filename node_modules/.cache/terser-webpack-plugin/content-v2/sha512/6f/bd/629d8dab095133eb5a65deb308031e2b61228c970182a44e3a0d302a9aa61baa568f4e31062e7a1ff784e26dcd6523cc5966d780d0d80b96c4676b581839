{"code":"!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=11)}([function(e,t){e.exports=require(\"express\")},function(e,t){e.exports=require(\"sequelize\")},function(e,t,n){n(9).config();var r=n(1);const o={IP:process.env.SERVER_IP,SERVER_PORT:process.env.LOCAL_PORT||8001,secret:\"thequickfoxjumpedofthelazydog\",cron_timer:5,prepare:!0},s=new r(process.env.DB_NAME||\"MEDWING_TEST\",process.env.DB_USER||\"medwing_admin\",process.env.DB_PASSWORD||\"pa55w0rd\",{host:process.env.DB_HOST||\"localhost\",dialect:process.env.DB_DIALECT||\"mysql\",pool:{max:1,min:0,idle:1e4,acquire:2e4,handleDisconnects:!0}});e.exports={config:o,sequelize:s}},function(e,t){e.exports=require(\"body-parser\")},function(e,t){e.exports=require(\"cookie-parser\")},function(e,t){e.exports=require(\"morgan\")},function(e,t){e.exports=require(\"express-session\")},function(e,t){e.exports=require(\"jsonwebtoken\")},function(e){e.exports=[{name:\"John Doe\"},{name:\"Jane Smith\"}]},function(e,t){e.exports=require(\"dotenv\")},function(e,t){e.exports=require(\"path\")},function(e,t,n){\"use strict\";n.r(t);var r=n(0),o=n.n(r),s=n(4),i=n.n(s),u=n(3),c=n.n(u),a=n(5),l=n.n(a),d=n(6),p=n.n(d),f=n(2),m=(n(10),n(1));class h{model(e){return e.define(\"user\",{user_id:{type:m.Sequelize.INTEGER},status:{type:m.Sequelize.ENUM,values:[\"A\",\"D\"],defaultValue:[\"A\"]}},{underscored:!0})}}class g{model(e){return e.define(\"location\",{user_id:{type:m.Sequelize.INTEGER},title:{type:m.Sequelize.STRING},address:{type:m.Sequelize.STRING},lat:{type:m.Sequelize.FLOAT},lng:{type:m.Sequelize.FLOAT},status:{type:m.Sequelize.ENUM,values:[\"A\",\"D\"],defaultValue:[\"A\"]}},{underscored:!0})}}class v{constructor(e){this.UserModel=e}routes(){const e=o.a.Router();return e.route(\"/\").get((e,t)=>{}),e.route(\"/:id\").get((e,t)=>{}),e}}class y{constructor(e,t){this.UserModel=e,this.LocationModel=t}routes(){const e=o.a.Router();return e.route(\"/\").get((e,t)=>{}),e.route(\"/:id\").get((e,t)=>{}),e}}class S{constructor(e){this.UserModel=e}routes(){const e=o.a.Router();return e.route(\"/\").get((e,t)=>{}),e.route(\"/:id\").get((e,t)=>{}),e}}var q=n(7),x=n.n(q),E=n(8);class T{constructor(e,t){this.minutes=e,this.UserModel=t}initDB(){E.map(e=>{console.log(\"user.name => \"+e.name)})}isValidToken(e){const t=o()();t.set(\"token\",f.config.secret),x.a.verify(e,t.get(\"token\"),function(e,t){return!e})}}n.d(t,\"default\",function(){return R});class R{constructor(){this.app=o()(),this.initExpress(this.app),this.initSQLAndRouters(this.app),this.finalize(this.app)}initExpress(e){e.use(c.a.json({limit:\"50mb\",parameterLimit:1e6})),e.use(c.a.urlencoded({limit:\"50mb\",extended:!0,parameterLimit:1e6})),e.use(i()()),e.use(p()({resave:!0,saveUninitialized:!0,secret:f.config.secret,cookieName:\"session\",duration:18e5,activeDuration:3e5,httpOnly:!0,cookie:{secure:!1}})),e.use((e,t,n)=>{t.header(\"Access-Control-Allow-Origin\",\"*\"),t.header(\"Access-Control-Allow-Headers\",\"Origin, X-Requested-With, Content-Type, Accept\"),t.header(\"Access-Control-Allow-Methods\",\"POST, GET, PUT, DELETE, OPTIONS\"),n()}),e.use(l()(\"dev\")),e.use(o.a.static(\"build\")),e.use((e,t,n)=>{t.header(\"Cache-Control\",\"private, no-cache, no-store, must-revalidate\"),t.header(\"Expires\",\"-1\"),t.header(\"Pragma\",\"no-cache\"),n()})}async initSQLAndRouters(e){const t=f.sequelize,n=(new g).model(t),r=(new h).model(t);n.belongsTo(r);const o=new y(r,n),s=new S(r),i=new v(r);if(f.config.prepare){await t.drop(),await t.sync({force:!0}),new T(r).initDB()}else await t.sync();e.use(\"/medwing/api/v1/users\",s.routes()),e.use(\"/medwing/api/v1/locations\",o.routes()),e.use(\"/medwing/api/sessions\",i.routes())}finalize(e){const t=f.config.SERVER_PORT;e.listen(parseInt(t),()=>{console.log(\"Running on PORT ::: \"+t)})}}new R}]);","extractedComments":[]}